#!/usr/bin/env bash

function fzf_open_with {
    file="$(fzf --reverse)"
    dir="${file%/*}"
    if [ -n "$file" ]; then # in case you press <Esc> and fzf returns zero length of string
        "$1" "$file" 2>/dev/null || "$1" "$dir";
    fi
}

# Colorize commands when possible.
alias \
	ls="ls -hN --color=auto --group-directories-first" \
	grep="grep --color=always" \
	diff="diff --color=auto" \

# Use neovim for vim if present.
if [ -x "$(command -v nvim)" ]; then
    export EDITOR="nvim"; alias vv='nvim $HOME/.config/nvim/init.vim' vimdiff="nvim -d"
else
    export EDITOR="vim"; alias vv='vim $HOME/.vim/vimrc'
fi

# sudo not required for some system commands
for command in ln mount umount pacman make systemctl ; do
	alias $command="sudo $command"
done; unset command

# These common commands are just too long! Abbreviate them.
alias \
    rm="trash" \
    c="clear" \
    cc="crow -b" \
    e="chmod u+x" \
    g="git" \
    p="sudo pacman" \
    t="tldr find" \
    q="exit" \
    r='$FILE_MANAGER' \
    n="newsboat" \
    L="less" \
    ..="cd .." \
    ....="cd ../.." \
    lt="du -sh * | sort -h" \
    ka="killall" \
    gh="history 0 | grep" \
    cd-="cd -" \
    sc="shellcheck" \
    v='$EDITOR' \
    vim='$EDITOR' \
    va='$EDITOR $HOME/.config/aliasrc' \
    vb='$EDITOR $HOME/.${SHELL##*/}rc' \
    ga="lazygit" \
    mm='$EDITOR -X $HOME/document/memorandum/Linux.md' \
    jr='$EDITOR $HOME/document/memorandum/journal.md' \
    wr='cd $HOME/workspace/writing' \
    sshs="ssh root@124.70.3.11" \
    sftps="sftp root@124.70.3.11" \
    fv='fzf_open_with $EDITOR' \
    fz='fzf_open_with $PDFVIEWER' \
    fr='fzf_open_with cd; $FILE_MANAGER' \
    fs="fzf_open_with bluetooth-sendto" \
    fcd="fzf_open_with cd" \
    neofetch='neofetch --config $HOME/.config/neofetch.conf' \

# aliases that precedes with "setsid -f"
alias \
    deskreen="setsid -f deskreen" \
	z="setsid -f zathura" \
	zathura="setsid -f zathura" \
    gedit="setsid -f gedit" \
    rstudio="setsid -f rstudio-bin" \
    spyder="setsid -f spyder" \
    wechat="setsid -f wechat-uos" \
    QQ="setsid -f icalingua" \
    et="setsid -f et" \
    wps="setsid -f wps" \
    wpp="setsid -f wpp" \
    snd="setsid -f bluetooth-sendto" \
    libreoffice="setsid -f libreoffice" \
    texdoc="setsid -f texdoc" \
    sxiv="setsid -f sxiv" \
    s="setsid -f sxiv" \
    brave="setsid -f brave" \
    gimp="setsid -f gimp" \
    xournalpp="setsid -f xournalpp" \
    xl="setsid -f xournalpp" \
    virtualbox="setsid -f virtualbox" \
    mpv="mpv --no-terminal" \
    R="R --quiet --no-save" \

# Verbosity and settings that you pretty much just always are going to want.
alias \
	cp="cp -iv" \
	mv="mv -iv" \
	mkd="mkdir -pv" \
	# rm="rm -vI" \
