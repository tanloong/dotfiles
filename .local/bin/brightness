#!/usr/bin/env python3
# -*- coding=utf-8 -*-

"""
调整亮度
"""

import sys
import os

flag = float(sys.argv[1])  # flag 为 1 或 -1
coefficient = 0.1*flag  # 每次增减最大亮度的 10%

brightness_path = "/sys/class/backlight/acpi_video0/brightness"
max_brighness_path = "/sys/class/backlight/acpi_video0/max_brightness"
current = int(open(brightness_path, 'r').read().strip())
maximum = int(open(max_brighness_path, 'r').read().strip())

new = current + int(coefficient * maximum)
if new >= 1 and new <= maximum:
    os.system(f"echo {new} | sudo tee {brightness_path}")
elif new < 1:
    os.system(f"echo 1 | sudo tee {brightness_path}")
else:
    os.system(f"echo {maximum} | sudo tee {brightness_path}")
    os.system(f"notify-send 'Max Brightness!'")
